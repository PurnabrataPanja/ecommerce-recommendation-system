{% extends "base.html" %}
{% block content %}

<div style="display:flex;">

    <!-- Sidebar -->
    <div style="width:250px; padding:20px; border-right:1px solid #ccc;">

        <h3>Categories</h3>
        <ul>
            {% for cat in categories %}
                <li>
                    <a href="?category={{ cat }}">{{ cat }}</a>
                </li>
            {% endfor %}
        </ul>

        <h3>Filter by Price</h3>
        <form method="get">
            <input type="number" name="min_price" placeholder="Min">
            <input type="number" name="max_price" placeholder="Max">
            <button type="submit">Apply</button>
        </form>

    </div>

    <!-- Product Grid -->
    <div style="flex:1; padding:20px;">
        <h2>Products</h2>

        <div style="display:grid; grid-template-columns: repeat(4, 1fr); gap:20px;">

            {% for product in products %}
                <div style="border:1px solid #ddd; padding:15px;">

                    <a href="{% url 'product_detail' product.id %}">
                        <img src="{{ product.image_url }}" style="width:100%; height:200px; object-fit:cover;">
                        <h4>{{ product.name|truncatechars:40 }}</h4>
                    </a>

                    <p>₹ {{ product.price }}</p>
                    <p>⭐ {{ product.rating }}</p>

                    <a href="{% url 'add_to_cart' product.id %}">
                        Add to Cart
                    </a>

                </div>
            {% endfor %}

        </div>
    </div>

</div>

{% endblock %}